@startuml
actor USUARIO 
USUARIO --> ParqueNatural: emitirBoleto(String DNI, Date fechaVisita, List<AreaProtegida> listadoIdAreas) Boleto

activate ParqueNatural
ParqueNatural --> ParqueNatural: buscarVisitante(int idVisitante): Visitante
ParqueNatural --> Visitante: generarCompra(AreaProtegida area, int idVisitante): Compra
activate Visitante

Visitante --> Compra: nuevaCompra(int idVisitante, int idCompra, Boleto boleto, AreaProtegida area, EstadoCompra estado): Compra
activate Compra

alt "hay cupos"
    Compra --> AreaProtegida: areaDisponible(List<Boleto> boletos, int idArea, Date fechaVisita): boolean
    activate AreaProtegida
    AreaProtegida --> Compra: boolean
    activate Compra
    Compra --> Estudiantil: calcularPrecio(): float
    deactivate Compra
    activate Estudiantil
    Estudiantil --> Compra: float
    deactivate Estudiantil
    Compra --> Visitante: Compra
    Visitante --> ParqueNatural: Compra
    ParqueNatural --> USUARIO: Boleto
else "No hay cupo"
    AreaProtegida --> Compra: boolean
    Compra --> Visitante: Error
    Visitante --> ParqueNatural: Error
    ParqueNatural --> USUARIO: Error
end
deactivate Compra
deactivate Estudiantil
deactivate Visitante
deactivate ParqueNacional
@enduml